(this.webpackJsonpfeatures=this.webpackJsonpfeatures||[]).push([[0],{107:function(e,t,n){},121:function(e,t,n){},253:function(e,t){},254:function(e,t){},255:function(e,t){},258:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(50),a=n.n(r),s=(n(121),n(39)),c=n(25),l=n(108),u=n.n(l),d=n(115),h=n(72),f=n(116),b=n(8),v=n(12),g=n(11),p=n(71),j=n(9),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(b.a)(this,e),this.undoLimit=t,this.undoList=[],this.redoList=[],this.current=null,this.debug=n}return Object(j.a)(e,[{key:"getUndoLimit",value:function(){return this.undoLimit}},{key:"getCurrent",value:function(){return this.current}},{key:"keep",value:function(e){try{this.redoList=[],this.current&&this.undoList.push(this.current),this.undoList.length>this.undoLimit&&this.undoList.shift(),this.current=e}finally{this.print()}}},{key:"undo",value:function(){try{return this.current&&(this.redoList.push(this.current),this.redoList.length>this.undoLimit&&this.redoList.shift(),0===this.undoList.length&&(this.current=null)),this.undoList.length>0?(this.current=this.undoList.pop(),this.current):null}finally{this.print()}}},{key:"redo",value:function(){try{return this.redoList.length>0?(this.current&&this.undoList.push(this.current),this.current=this.redoList.pop(),this.current):null}finally{this.print()}}},{key:"canRedo",value:function(){return this.redoList.length>0}},{key:"canUndo",value:function(){return this.undoList.length>0||null!==this.current}},{key:"clear",value:function(){this.undoList=[],this.redoList=[],this.current=null,this.print()}},{key:"print",value:function(){this.debug&&console.log(this.undoList," -> "+this.current+" <- ",this.redoList.slice(0).reverse())}}]),e}(),O=_,w=function(e,t){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},y=function(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t},k=function(e){var t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),"rgba("+[(t="0x"+t.join(""))>>16&255,t>>8&255,255&t].join(",")+",0.4)";throw new Error("Bad Hex")},m=function(){function e(t){Object(b.a)(this,e),this._canvas=t}return Object(j.a)(e,[{key:"configureCanvas",value:function(e){}},{key:"doMouseUp",value:function(e){}},{key:"doMouseDown",value:function(e){}},{key:"doMouseMove",value:function(e){}},{key:"doMouseOut",value:function(e){}}]),e}(),x=n(18).fabric,C=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor}},{key:"doMouseDown",value:function(e){this.isDown=!0;var t=this._canvas,n=t.getPointer(e.e),o=[n.x,n.y,n.x,n.y];this.line=new x.Line(o,{strokeWidth:this._width,fill:this._color,stroke:this._color,originX:"center",originY:"center",selectable:!1,evented:!1}),this.head=new x.Triangle({fill:this._color,left:n.x,top:n.y,originX:"center",originY:"center",height:3*this._width,width:3*this._width,selectable:!1,evented:!1,angle:90}),t.add(this.line),t.add(this.head)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.line.set({x2:n.x,y2:n.y}),this.line.setCoords();var o=n.x-this.line.x1,i=n.y-this.line.y1;this.head.set({left:n.x,top:n.y,angle:90+180*Math.atan2(i,o)/Math.PI}),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1;var t=this._canvas;t.remove(this.line),t.remove(this.head);var n=new x.Group([this.line,this.head]);t.add(n)}},{key:"doMouseOut",value:function(e){this.isDown=!1}}]),n}(m),M=C,S={Circle:"circle",Line:"line",Arrow:"arrow",Pencil:"pencil",Rectangle:"rectangle",RectangleLabel:"rectangle-label",Select:"select",Pan:"pan",Highlighter:"highlighter",DefaultTool:"default-tool"},L=(n(18).fabric,function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),t.discardActiveObject(),t.defaultCursor="pointer",t.renderAll()}}]),n}(m)),D=L,T=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=!1,t.selection=!0,t.forEachObject((function(e){e.selectable=e.evented=!0}))}}]),n}(m),A=T,Y=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){this._canvas.isDrawingMode=!0,this._canvas.freeDrawingBrush.width=e.lineWidth,this._canvas.freeDrawingBrush.color=e.lineColor}}]),n}(m),X=Y,N=n(18).fabric,P=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor}},{key:"doMouseDown",value:function(e){this.isDown=!0;var t=this._canvas,n=t.getPointer(e.e),o=[n.x,n.y,n.x,n.y];this.line=new N.Line(o,{strokeWidth:this._width,fill:this._color,stroke:this._color,originX:"center",originY:"center",selectable:!1,evented:!1}),t.add(this.line)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.line.set({x2:n.x,y2:n.y}),this.line.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}},{key:"doMouseOut",value:function(e){this.isDown=!1}}]),n}(m),R=P,W=n(18).fabric,E=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);this.startX=n.x,this.startY=n.y,this.rect=new W.Rect({left:this.startX,top:this.startY,originX:"left",originY:"top",width:n.x-this.startX,height:n.y-this.startY,stroke:this._color,strokeWidth:this._width,fill:this._fill,transparentCorners:!1,selectable:!1,evented:!1,strokeUniform:!0,noScaleCache:!1,angle:0}),t.add(this.rect)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.startX>n.x&&this.rect.set({left:Math.abs(n.x)}),this.startY>n.y&&this.rect.set({top:Math.abs(n.y)}),this.rect.set({width:Math.abs(this.startX-n.x)}),this.rect.set({height:Math.abs(this.startY-n.y)}),this.rect.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(m),U=E,B=n(18).fabric,J=function(){function e(t,n,o,i){var r=this;Object(b.a)(this,e),this.update=function(e){r._textObj&&r._rectObj&&e.target===r._rectObj&&r._textObj.set({width:r._rectObj.getScaledWidth(),scaleX:1,scaleY:1,top:r._rectObj.top-r._textObj.getScaledHeight(),left:r._rectObj.left})},this._canvas=t,this._text=n,this._rectObj=new B.Rect(o),this._textObj=new B.Textbox(n,i),t.on({"object:scaling":this.update}),t.on({"object:moving":this.update})}return Object(j.a)(e,[{key:"setText",value:function(e){this._text=e,this._textObj.set({text:e})}}]),e}(),z=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor,this._textString=e.text,this._maxFontSize=12}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);for(this.startX=n.x,this.startY=n.y,this.rectangleLabel=new J(t,"New drawing",{left:this.startX,top:this.startY,originX:"left",originY:"top",width:n.x-this.startX,height:n.y-this.startY,stroke:this._color,strokeWidth:this._width,fill:this._fill,transparentCorners:!1,selectable:!1,evented:!1,strokeUniform:!0,noScaleCache:!1,angle:0},{left:this.startX,top:this.startY-12,originX:"left",originY:"top",width:n.x-this.startX-this._width,height:t.height/3,fontSize:this._maxFontSize,noScaleCache:!1,backgroundColor:this._color,transparentCorners:!0,hasControls:!1,angle:0}),this._objects&&this._objects.length>0?this._objects.push(this.rectangleLabel):this._objects=[this.rectangleLabel];this.rectangleLabel._textObj.height>t.height/3;)this.rectangleLabel._textObj.set({fontSize:this.rectangleLabel._textObj.fontSize-1,top:this.startY-this.rectangleLabel._textObj.fontSize-12});t.add(this.rectangleLabel._rectObj),t.add(this.rectangleLabel._textObj),t.renderAll()}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.startX>n.x&&(this.rectangleLabel._rectObj.set({left:Math.abs(n.x)}),this.rectangleLabel._textObj.set({left:Math.abs(n.x)})),this.startY>n.y&&(this.rectangleLabel._rectObj.set({left:Math.abs(n.x)}),this.rectangleLabel._textObj.set({top:Math.abs(n.y)})),this.rectangleLabel._textObj.setCoords(),this.rectangleLabel._rectObj.set({width:Math.abs(this.startX-n.x)}),this.rectangleLabel._textObj.set({width:this.rectangleLabel._rectObj.getScaledWidth()}),this.rectangleLabel._rectObj.set({height:Math.abs(this.startY-n.y)}),this.rectangleLabel._rectObj.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1,this._canvas.renderAll()}}]),n}(m),H=z,I=n(18).fabric,q=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e),o=[n.x,n.y];this.startX=o[0],this.startY=o[1],this.circle=new I.Circle({left:this.startX,top:this.startY,originX:"left",originY:"center",strokeWidth:this._width,stroke:this._color,fill:this._fill,selectable:!1,evented:!1,radius:1}),t.add(this.circle)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.circle.set({radius:w({x:this.startX,y:this.startY},{x:n.x,y:n.y})/2,angle:180*Math.atan2(n.y-this.startY,n.x-this.startX)/Math.PI}),this.circle.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(m),F=q,V=(n(18).fabric,function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),t.defaultCursor="move"}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);this.startX=n.x,this.startY=n.y}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);t.relativePan({x:n.x-this.startX,y:n.y-this.startY}),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(m)),G=V,K=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"configureCanvas",value:function(e){this._canvas.isDrawingMode=!0,this._canvas.freeDrawingBrush.width=e.lineWidth,this._canvas.freeDrawingBrush.color=e.lineColor.indexOf("#")>-1?k(e.lineColor):k(function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof t[e.toLowerCase()]&&t[e.toLowerCase()]}(e.lineColor))}}]),n}(m),$=K,Q=n(18),Z=n(74),ee=["stretched","stretchedX","stretchedY"],te=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={action:!0},e._initTools=function(t){e._tools={},e._tools[S.Select]=new A(t),e._tools[S.Pencil]=new X(t),e._tools[S.Line]=new R(t),e._tools[S.Arrow]=new M(t),e._tools[S.Rectangle]=new U(t),e._tools[S.RectangleLabel]=new H(t),e._tools[S.Circle]=new F(t),e._tools[S.Pan]=new G(t),e._tools[S.Highlighter]=new $(t),e._tools[S.DefaultTool]=new D(t)},e.enableTouchScroll=function(){var t=e._fc;t.allowTouchScrolling||(t.allowTouchScrolling=!0)},e.disableTouchScroll=function(){var t=e._fc;t.allowTouchScrolling&&(t.allowTouchScrolling=!1)},e.addImg=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e._fc;Q.fabric.Image.fromURL(t,(function(e){var t={left:Math.random()*(o.getWidth()-.5*e.width),top:Math.random()*(o.getHeight()-.5*e.height),scale:.5};Object.assign(t,n),e.scale(t.scale),e.set({left:t.left,top:t.top}),o.add(e)}))},e._onObjectAdded=function(t){var n=e.props.onObjectAdded;if(e.state.action){var o=t.target;o.__version=1;var i=o.toJSON();o.__originalState=i;var r=JSON.stringify(i);e._history.keep([o,r,r]),n(t)}else e.setState({action:!0})},e._onObjectMoving=function(t){(0,e.props.onObjectMoving)(t)},e._onObjectScaling=function(t){(0,e.props.onObjectScaling)(t)},e._onObjectRotating=function(t){(0,e.props.onObjectRotating)(t)},e._onObjectModified=function(t){var n=e.props.onObjectModified,o=t.target;o.__version+=1;var i=JSON.stringify(o.__originalState),r=o.toJSON();o.__originalState=r;var a=JSON.stringify(r);e._history.keep([o,i,a]),n(t)},e._onObjectRemoved=function(t){var n=e.props.onObjectRemoved,o=t.target;o.__removed?o.__version+=1:(o.__version=0,n(t))},e._onMouseDown=function(t){var n=e.props.onMouseDown;e._selectedTool.doMouseDown(t),n(t)},e._onMouseMove=function(t){var n=e.props.onMouseMove;e._selectedTool.doMouseMove(t),n(t)},e._onMouseOut=function(t){var n=e.props.onMouseOut;if(e._selectedTool.doMouseOut(t),e.props.onChange){var o=e.props.onChange;setTimeout((function(){o(t.e)}),10)}n(t)},e._onMouseUp=function(t){var n=e.props.onMouseUp;if(e._selectedTool.doMouseUp(t),e.props.tool!==S.Pencil){var o=e._fc.getObjects(),i=o[o.length-1];i&&1===i.__version&&(i.__originalState=i.toJSON())}if(e.props.onChange){var r=e.props.onChange;setTimeout((function(){r(t.e)}),10)}n(t)},e._resize=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&t.preventDefault();var i=e.props,r=i.widthCorrection,a=i.heightCorrection,s=e._fc,c=e._container,l=c.offsetWidth,u=c.clientHeight,d=n||s.getWidth(),h=o||s.getHeight(),f=((l-r)/d).toFixed(2),b=((u-a)/h).toFixed(2);if(s.setWidth(l-r),s.setHeight(u-a),s.backgroundImage){var v=s.backgroundImage;v.width=v.width*f,v.height=v.height*b}var g=s.getObjects();for(var p in g){var j=g[p],_=j.scaleX,O=j.scaleY,w=j.left,y=j.top,k=_*f,m=O*b,x=w*f,C=y*b;j.scaleX=k,j.scaleY=m,j.left=x,j.top=C,j.setCoords()}s.renderAll(),s.calcOffset()},e._backgroundColor=function(t){if(t){var n=e._fc;n.setBackgroundColor(t,(function(){return n.renderAll()}))}},e.zoom=function(t){var n=e._fc,o=n.getObjects();for(var i in o)o[i].scaleX=o[i].scaleX*t,o[i].scaleY=o[i].scaleY*t,o[i].left=o[i].left*t,o[i].top=o[i].top*t,o[i].setCoords();n.renderAll(),n.calcOffset()},e.undo=function(){var t=e._history,n=t.getCurrent(),o=Object(c.a)(n,3),i=o[0],r=o[1];o[2];t.undo(),i.__removed?e.setState({action:!1},(function(){e._fc.add(i),i.__version-=1,i.__removed=!1})):i.__version<=1?e._fc.remove(i):(i.__version-=1,i.setOptions(JSON.parse(r)),i.setCoords(),e._fc.renderAll()),e.props.onChange&&e.props.onChange()},e.redo=function(){var t=e._history;if(t.canRedo()){var n=e._fc,o=t.redo(),i=Object(c.a)(o,3),r=i[0],a=(i[1],i[2]);0===r.__version?e.setState({action:!1},(function(){n.add(r),r.__version=1})):(r.__version+=1,r.setOptions(JSON.parse(a))),r.setCoords(),n.renderAll(),e.props.onChange&&e.props.onChange()}},e.canUndo=function(){return e._history.canUndo()},e.canRedo=function(){return e._history.canRedo()},e.toDataURL=function(t){return e._fc.toDataURL(t)},e.toJSON=function(t){return e._fc.toJSON(t)},e.fromJSON=function(t){if(t){var n=e._fc;setTimeout((function(){n.loadFromJSON(t,(function(){e.props.tool===S.DefaultTool&&(n.isDrawingMode=n.selection=!1,n.forEachObject((function(e){return e.selectable=e.evented=!1}))),n.renderAll(),e.props.onChange&&e.props.onChange()}))}),100)}},e.clear=function(t){var n=e.toJSON(t);return e._fc.clear(),e._history.clear(),n},e.hasSelection=function(){return!!e._fc.getActiveObject()},e.clearSelection=function(){var t=e._fc;t.discardActiveObject(),t.requestRenderAll()},e.removeSelected=function(){var t=e._fc,n=t.getActiveObject();if(n){var o=[];"activeSelection"===n.type?n.forEachObject((function(e){return o.push(e)})):o.push(n),o.forEach((function(n){n.__removed=!0;var o=n.toJSON();n.__originalState=o;var i=JSON.stringify(o);e._history.keep([n,i,i]),t.remove(n)})),t.discardActiveObject(),t.requestRenderAll()}},e.copy=function(){e._fc.getActiveObject().clone((function(t){return e._clipboard=t}))},e.paste=function(){e._clipboard.clone((function(t){var n=e._fc;n.discardActiveObject(),t.set({left:t.left+10,top:t.top+10,evented:!0}),"activeSelection"===t.type?(t.canvas=n,t.forEachObject((function(e){return n.add(e)})),t.setCoords()):n.add(t),e._clipboard.top+=10,e._clipboard.left+=10,n.setActiveObject(t),n.requestRenderAll()}))},e.setBackgroundFromDataUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e._fc,i=new Image;i.setAttribute("crossOrigin","anonymous");var r=n.stretched,a=n.stretchedX,s=n.stretchedY,c=Object(f.a)(n,ee);i.onload=function(){var e=new Q.fabric.Image(i);(r||a)&&e.scaleToWidth(o.width),(r||s)&&e.scaleToHeight(o.height),o.setBackgroundImage(e,(function(){return o.renderAll()}),c)},i.src=t},e.addText=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e._fc,i=new Q.fabric.IText(t,n),r={left:.5*(o.getWidth()-i.width),top:.5*(o.getHeight()-i.height)};Object.assign(n,r),i.set({left:n.left,top:n.top}),o.add(i)},e.callEvent=function(t,n){e._selectedTool&&n(t)},e.componentDidMount=function(){var t=e.props,n=t.tool,o=t.value,i=t.undoSteps,r=t.defaultValue,a=t.backgroundColor,s=e._fc=new Q.fabric.Canvas(e._canvas);e._initTools(s),e._backgroundColor(a);var c=e._tools[n];c&&c.configureCanvas(e.props),e._selectedTool=c,window.addEventListener("resize",e._resize,!1),e._history=new O(i),s.on("object:added",(function(t){return e.callEvent(t,e._onObjectAdded)})),s.on("object:modified",(function(t){return e.callEvent(t,e._onObjectModified)})),s.on("object:removed",(function(t){return e.callEvent(t,e._onObjectRemoved)})),s.on("mouse:down",(function(t){return e.callEvent(t,e._onMouseDown)})),s.on("mouse:move",(function(t){return e.callEvent(t,e._onMouseMove)})),s.on("mouse:up",(function(t){return e.callEvent(t,e._onMouseUp)})),s.on("mouse:out",(function(t){return e.callEvent(t,e._onMouseOut)})),s.on("object:moving",(function(t){return e.callEvent(t,e._onObjectMoving)})),s.on("object:scaling",(function(t){return e.callEvent(t,e._onObjectScaling)})),s.on("object:rotating",(function(t){return e.callEvent(t,e._onObjectRotating)})),e.disableTouchScroll(),e._resize(),(o||r)&&e.fromJSON(o||r)},e.componentWillUnmount=function(){return window.removeEventListener("resize",e._resize)},e.componentDidUpdate=function(t,n){e.props.width===t.width&&e.props.height===t.height||e._resize(),e.props.tool!==t.tool&&(e._selectedTool=e._tools[e.props.tool],e._fc.defaultCursor="default",e._selectedTool&&e._selectedTool.configureCanvas(e.props)),e.props.backgroundColor!==t.backgroundColor&&e._backgroundColor(e.props.backgroundColor),(e.props.value!==t.value||e.props.value&&e.props.forceValue)&&e.fromJSON(e.props.value)},e.render=function(){var t=e.props,n=t.className,o=t.style,i=t.width,r=t.height,a=Object.assign({},o||{},i?{width:i}:{},r?{height:r}:{height:512});return Object(Z.jsx)("div",{className:n,ref:function(t){return e._container=t},style:a,children:Object(Z.jsx)("canvas",{id:y(),ref:function(t){return e._canvas=t},children:"Sorry, Canvas HTML5 element is not supported by your browser :("})})},e}return n}(p.PureComponent);te.defaultProps={lineColor:"black",lineWidth:10,fillColor:"transparent",backgroundColor:"transparent",opacity:1,undoSteps:25,tool:null,widthCorrection:0,heightCorrection:0,forceValue:!1,onObjectAdded:function(){return null},onObjectModified:function(){return null},onObjectRemoved:function(){return null},onMouseDown:function(){return null},onMouseMove:function(){return null},onMouseUp:function(){return null},onMouseOut:function(){return null},onObjectMoving:function(){return null},onObjectScaling:function(){return null},onObjectRotating:function(){return null}};var ne=te,oe=(n(107),n(5)),ie=function(e){var t=e.handle,n=Object(o.useState)("black"),i=Object(c.a)(n,2),r=i[0],a=i[1];return Object(oe.jsx)(h.a,{color:r,onChange:function(e){t(e),a(e)}})},re=i.a.forwardRef((function(e){var t,n,i,r=e.open,a=e.onDismiss,s=e.handleClick,c=e.handle,l=e.state,u=Object(o.useRef)();return Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("div",{className:"Button",children:[Object(oe.jsx)("button",{onClick:null===u||void 0===u||null===(t=u.current)||void 0===t?void 0:t.undo,children:Object(oe.jsx)("h3",{children:"Undo"})}),Object(oe.jsx)("button",{onClick:null===u||void 0===u||null===(n=u.current)||void 0===n?void 0:n.redo,children:Object(oe.jsx)("h3",{children:"Redo"})}),Object(oe.jsx)("button",{onClick:null===u||void 0===u||null===(i=u.current)||void 0===i?void 0:i.addText("text"),children:Object(oe.jsx)("h3",{children:"Text"})})]}),Object(oe.jsx)(d.a,{open:r,onDismiss:a,snapPoints:function(e){return e.minHeight},children:Object(oe.jsxs)("div",{className:"InsideBottomSheet",children:[Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsx)("button",{onClick:function(){s("Pencil")},children:Object(oe.jsx)("h3",{children:"Pencil"})})}),Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsxs)("button",{onClick:function(){s("Line")},children:[" ",Object(oe.jsx)("h3",{children:"Line"})]})}),Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsx)("button",{onClick:function(){s("Rectangle")},children:Object(oe.jsx)("h3",{children:"Rectangle"})})}),Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsx)("button",{onClick:function(){s("Circle")},children:Object(oe.jsx)("h3",{children:"Circle"})})}),Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsxs)("button",{onClick:function(){s("Pan")},children:[" ",Object(oe.jsx)("h3",{children:"Pan"})]})}),Object(oe.jsx)("div",{className:"Button",children:Object(oe.jsx)("button",{children:Object(oe.jsx)("h3",{children:Object(oe.jsx)(ie,{handle:c})})})})]})}),Object(oe.jsx)("div",{style:{background:"#000",padding:10},children:Object(oe.jsx)(ne,{ref:u,width:null===l||void 0===l?void 0:l.sketchWidth,height:null===l||void 0===l?void 0:l.sketchHeight,tool:null===l||void 0===l?void 0:l.tool,lineColor:null===l||void 0===l?void 0:l.lineColor,lineWidth:null===l||void 0===l?void 0:l.lineWidth,fillColor:(null===l||void 0===l?void 0:l.fillWithColor)?null===l||void 0===l?void 0:l.fillColor:"transparent",backgroundColor:null===l||void 0===l?void 0:l.backgroundColor,defaultValue:{background:"#ffffff"}})})]})}));n(258);var ae=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)({lineWidth:10,lineColor:"black",fillColor:"#ccffcc",backgroundColor:"#ffcccc",shadowWidth:0,shadowOffset:0,tool:S.Pencil,enableRemoveSelected:!1,fillWithColor:!1,fillWithBackgroundColor:!1,drawings:[],canUndo:!0,canRedo:!1,undoSteps:15,controlledSize:!1,sketchWidth:1500,sketchHeight:300,stretched:!0,stretchedX:!1,stretchedY:!1,originX:"left",originY:"top",imageUrl:"https://files.gamebanana.com/img/ico/sprays/4ea2f4dad8d6f.png",expandTools:!1,expandControls:!1,expandColors:!1,expandBack:!1,expandImages:!1,expandControlled:!1,enableCopyPaste:!1}),a=Object(c.a)(r,2),l=a[0],d=a[1];return Object(oe.jsxs)("div",{className:"parent",children:[Object(oe.jsx)(u.a,{width:"100%",height:"100%",controls:!0,url:"https://www.youtube.com/watch?v=7sDY4m8KNLc"}),Object(oe.jsxs)("div",{className:"child",children:[Object(oe.jsx)("button",{className:"Bottom",onClick:function(){return i(!0)},children:"Open"}),Object(oe.jsx)(re,{open:n,onDismiss:function(){i(!1)},handleClick:function(e){i(!1),d(Object(s.a)(Object(s.a)({},l),{},{tool:S[e],enableRemoveSelected:S[e]===(null===S||void 0===S?void 0:S.Select),enableCopyPaste:S[e]===(null===S||void 0===S?void 0:S.Select)}))},handle:function(e){console.log(e,"color"),d(Object(s.a)(Object(s.a)({},l),{},{lineColor:e.hex})),i(!1)},state:l})]})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,267)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),r(e),a(e)}))};a.a.render(Object(oe.jsx)(i.a.StrictMode,{children:Object(oe.jsx)(ae,{})}),document.getElementById("root")),se()}},[[259,1,2]]]);
//# sourceMappingURL=main.3f8f6120.chunk.js.map