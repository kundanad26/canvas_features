{"version":3,"sources":["react-sketch/src/history/index.js","react-sketch/src/utils/index.js","react-sketch/src/tools/fabrictool.js","react-sketch/src/tools/Arrow/index.js","react-sketch/src/tools.js","react-sketch/src/tools/defaul-tool.js","react-sketch/src/tools/Select/index.js","react-sketch/src/tools/Pencil/index.js","react-sketch/src/tools/Line/index.js","react-sketch/src/tools/Rectangle/index.js","react-sketch/src/tools/Rectangle/rectangle-label-object.js","react-sketch/src/tools/Rectangle/rectangle-label.js","react-sketch/src/tools/Circle/index.js","react-sketch/src/tools/Pan/index.js","react-sketch/src/tools/Highlighter/index.js","react-sketch/src/components/SketchField/SketchField.jsx","Colorpicker.js","BottomSheet.js","App.js","reportWebVitals.js","index.js"],"names":["History","undoLimit","debug","this","undoList","redoList","current","obj","push","length","shift","print","pop","console","log","slice","reverse","linearDistance","point1","point2","xs","x","ys","y","Math","sqrt","uuid4","ii","uuid","random","toString","hexToRgbA","hex","c","test","substring","split","join","Error","FabricCanvasTool","canvas","_canvas","props","event","fabric","require","Index","isDrawingMode","selection","forEachObject","o","selectable","evented","_width","lineWidth","_color","lineColor","isDown","pointer","getPointer","e","points","line","Line","strokeWidth","fill","stroke","originX","originY","head","Triangle","left","top","height","width","angle","add","set","x2","y2","setCoords","x_delta","x1","y_delta","y1","atan2","PI","renderAll","remove","arrow","Group","Circle","Arrow","Pencil","Rectangle","RectangleLabel","Select","Pan","Highlighter","DefaultTool","discardActiveObject","defaultCursor","freeDrawingBrush","color","_fill","fillColor","startX","startY","rect","Rect","transparentCorners","strokeUniform","noScaleCache","abs","RectangleLabelObject","text","rectProps","textProps","update","_textObj","_rectObj","target","getScaledWidth","scaleX","scaleY","getScaledHeight","_text","Textbox","on","_textString","_maxFontSize","rectangleLabel","fontSize","backgroundColor","hasControls","_objects","circle","radius","relativePan","indexOf","colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","toLowerCase","colorNameToHex","SketchField","state","action","_initTools","fabricCanvas","_tools","Tool","enableTouchScroll","_fc","allowTouchScrolling","disableTouchScroll","addImg","dataUrl","options","Image","fromURL","oImg","opts","getWidth","getHeight","scale","Object","assign","_onObjectAdded","onObjectAdded","__version","objState","toJSON","__originalState","JSON","stringify","_history","keep","setState","_onObjectMoving","onObjectMoving","_onObjectScaling","onObjectScaling","_onObjectRotating","onObjectRotating","_onObjectModified","onObjectModified","prevState","currState","_onObjectRemoved","onObjectRemoved","__removed","_onMouseDown","onMouseDown","_selectedTool","doMouseDown","_onMouseMove","onMouseMove","doMouseMove","_onMouseOut","onMouseOut","doMouseOut","onChange","setTimeout","_onMouseUp","onMouseUp","doMouseUp","tool","objects","getObjects","newObj","_resize","canvasWidth","canvasHeight","preventDefault","widthCorrection","heightCorrection","_container","offsetWidth","clientHeight","prevWidth","prevHeight","wfactor","toFixed","hfactor","setWidth","setHeight","backgroundImage","bi","i","tempScaleX","tempScaleY","tempLeft","tempTop","calcOffset","_backgroundColor","setBackgroundColor","zoom","factor","undo","history","getCurrent","setOptions","parse","redo","canRedo","canUndo","toDataURL","propertiesToInclude","fromJSON","json","loadFromJSON","clear","discarded","hasSelection","getActiveObject","clearSelection","requestRenderAll","removeSelected","activeObj","selected","type","forEach","copy","clone","cloned","_clipboard","paste","clonedObj","setActiveObject","setBackgroundFromDataUrl","img","setAttribute","stretched","stretchedX","stretchedY","fabricOptions","onload","imgObj","scaleToWidth","scaleToHeight","setBackgroundImage","src","addText","iText","IText","callEvent","eventFunction","componentDidMount","value","undoSteps","defaultValue","Canvas","selectedTool","configureCanvas","window","addEventListener","componentWillUnmount","removeEventListener","componentDidUpdate","prevProps","forceValue","render","className","style","canvasDivStyle","ref","id","PureComponent","defaultProps","opacity","Picker","handle","useState","setColor","updatedColor","Bs","React","forwardRef","open","onDismiss","handleClick","sketchRef","useRef","onClick","snapPoints","minHeight","background","padding","sketchWidth","sketchHeight","fillWithColor","App","setOpen","shadowWidth","shadowOffset","Tools","enableRemoveSelected","fillWithBackgroundColor","drawings","controlledSize","imageUrl","expandTools","expandControls","expandColors","expandBack","expandImages","expandControlled","enableCopyPaste","controls","url","val","col","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3f8f6120.chunk.js","sourcesContent":["/**\r\n * Maintains the history of an object\r\n */\r\nclass History {\r\n  constructor(undoLimit = 10, debug = false) {\r\n    this.undoLimit = undoLimit;\r\n    this.undoList = [];\r\n    this.redoList = [];\r\n    this.current = null;\r\n    this.debug = debug;\r\n  }\r\n\r\n  /**\r\n   * Get the limit of undo/redo actions\r\n   *\r\n   * @returns {number|*} the undo limit, as it is configured when constructing the history instance\r\n   */\r\n  getUndoLimit() {\r\n    return this.undoLimit;\r\n  }\r\n\r\n  /**\r\n   * Get Current state\r\n   *\r\n   * @returns {null|*}\r\n   */\r\n  getCurrent() {\r\n    return this.current;\r\n  }\r\n\r\n  /**\r\n   * Keep an object to history\r\n   *\r\n   * This method will set the object as current value and will push the previous \"current\" object to the undo history\r\n   *\r\n   * @param obj\r\n   */\r\n  keep(obj) {\r\n    try {\r\n      this.redoList = [];\r\n      if (this.current) {\r\n        this.undoList.push(this.current);\r\n      }\r\n      if (this.undoList.length > this.undoLimit) {\r\n        this.undoList.shift();\r\n      }\r\n      this.current = obj;\r\n    } finally {\r\n      this.print();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Undo the last object, this operation will set the current object to one step back in time\r\n   *\r\n   * @returns the new current value after the undo operation, else null if no undo operation was possible\r\n   */\r\n  undo() {\r\n    try {\r\n      if (this.current) {\r\n        this.redoList.push(this.current);\r\n        if (this.redoList.length > this.undoLimit) {\r\n          this.redoList.shift();\r\n        }\r\n        if (this.undoList.length === 0) this.current = null;\r\n      }\r\n      if (this.undoList.length > 0) {\r\n        this.current = this.undoList.pop();\r\n        return this.current;\r\n      }\r\n      return null;\r\n    } finally {\r\n      this.print();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Redo the last object, redo happens only if no keep operations have been performed\r\n   *\r\n   * @returns the new current value after the redo operation, or null if no redo operation was possible\r\n   */\r\n  redo() {\r\n    try {\r\n      if (this.redoList.length > 0) {\r\n        if (this.current) this.undoList.push(this.current);\r\n        this.current = this.redoList.pop();\r\n        return this.current;\r\n      }\r\n      return null;\r\n    } finally {\r\n      this.print();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks whether we can perform a redo operation\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  canRedo() {\r\n    return this.redoList.length > 0;\r\n  }\r\n\r\n  /**\r\n   * Checks whether we can perform an undo operation\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  canUndo() {\r\n    return this.undoList.length > 0 || this.current !== null;\r\n  }\r\n\r\n  /**\r\n   * Clears the history maintained, can be undone\r\n   */\r\n  clear() {\r\n    this.undoList = [];\r\n    this.redoList = [];\r\n    this.current = null;\r\n    this.print();\r\n  }\r\n\r\n  print() {\r\n    if (this.debug) {\r\n      /* eslint-disable no-console */\r\n      console.log(\r\n        this.undoList,\r\n        \" -> \" + this.current + \" <- \",\r\n        this.redoList.slice(0).reverse()\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default History;\r\n","/**\r\n * Determine the mouse position\r\n *\r\n * @param event the canvas event\r\n * @returns *[] tuple of position x,y\r\n * @private\r\n */\r\nexport const pointerPosition = (event) => {\r\n  event = event || window.event;\r\n  var target = event.target || event.srcElement,\r\n    style = target.currentStyle || window.getComputedStyle(target, null),\r\n    borderLeftWidth = parseInt(style[\"borderLeftWidth\"], 10),\r\n    borderTopWidth = parseInt(style[\"borderTopWidth\"], 10),\r\n    rect = target.getBoundingClientRect(),\r\n    _x = event.clientX - borderLeftWidth - rect.left,\r\n    _y = event.clientY - borderTopWidth - rect.top,\r\n    _touchX = event.changedTouches\r\n      ? event.changedTouches[0].clientX - borderLeftWidth - rect.left\r\n      : null,\r\n    _touchY = event.changedTouches\r\n      ? event.changedTouches[0].clientY - borderTopWidth - rect.top\r\n      : null;\r\n  return [_x || _touchX, _y || _touchY];\r\n};\r\n\r\n/**\r\n * Calculate the distance of two x,y points\r\n *\r\n * @param point1 an object with x,y attributes representing the start point\r\n * @param point2 an object with x,y attributes representing the end point\r\n *\r\n * @returns {number}\r\n */\r\nexport const linearDistance = (point1, point2) => {\r\n  let xs = point2.x - point1.x;\r\n  let ys = point2.y - point1.y;\r\n  return Math.sqrt(xs * xs + ys * ys);\r\n};\r\n\r\n/**\r\n * Return a random uuid of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\r\n * @returns {string}\r\n */\r\nexport const uuid4 = () => {\r\n  let uuid = \"\",\r\n    ii;\r\n  for (ii = 0; ii < 32; ii += 1) {\r\n    switch (ii) {\r\n      case 8:\r\n      case 20:\r\n        uuid += \"-\";\r\n        uuid += ((Math.random() * 16) | 0).toString(16);\r\n        break;\r\n      case 12:\r\n        uuid += \"-\";\r\n        uuid += \"4\";\r\n        break;\r\n      case 16:\r\n        uuid += \"-\";\r\n        uuid += ((Math.random() * 4) | 8).toString(16);\r\n        break;\r\n      default:\r\n        uuid += ((Math.random() * 16) | 0).toString(16);\r\n    }\r\n  }\r\n  return uuid;\r\n};\r\n\r\n/**\r\n *\r\n * @param hex is a color code in the form of hex.\r\n * Return a rgba equivalent of given hex.\r\n * @returns {string}\r\n */\r\nexport const hexToRgbA = (hex) => {\r\n  var c;\r\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\r\n    c = hex.substring(1).split(\"\");\r\n    if (c.length == 3) {\r\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n    }\r\n    c = \"0x\" + c.join(\"\");\r\n    return \"rgba(\" + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(\",\") + \",0.4)\";\r\n  }\r\n  throw new Error(\"Bad Hex\");\r\n};\r\n\r\n/**\r\n *\r\n * @param color is a color name to convert it to hex\r\n * Return hex equivalent of given color name\r\n */\r\nexport const colorNameToHex = (color) => {\r\n  var colors = {\r\n    aliceblue: \"#f0f8ff\",\r\n    antiquewhite: \"#faebd7\",\r\n    aqua: \"#00ffff\",\r\n    aquamarine: \"#7fffd4\",\r\n    azure: \"#f0ffff\",\r\n    beige: \"#f5f5dc\",\r\n    bisque: \"#ffe4c4\",\r\n    black: \"#000000\",\r\n    blanchedalmond: \"#ffebcd\",\r\n    blue: \"#0000ff\",\r\n    blueviolet: \"#8a2be2\",\r\n    brown: \"#a52a2a\",\r\n    burlywood: \"#deb887\",\r\n    cadetblue: \"#5f9ea0\",\r\n    chartreuse: \"#7fff00\",\r\n    chocolate: \"#d2691e\",\r\n    coral: \"#ff7f50\",\r\n    cornflowerblue: \"#6495ed\",\r\n    cornsilk: \"#fff8dc\",\r\n    crimson: \"#dc143c\",\r\n    cyan: \"#00ffff\",\r\n    darkblue: \"#00008b\",\r\n    darkcyan: \"#008b8b\",\r\n    darkgoldenrod: \"#b8860b\",\r\n    darkgray: \"#a9a9a9\",\r\n    darkgreen: \"#006400\",\r\n    darkkhaki: \"#bdb76b\",\r\n    darkmagenta: \"#8b008b\",\r\n    darkolivegreen: \"#556b2f\",\r\n    darkorange: \"#ff8c00\",\r\n    darkorchid: \"#9932cc\",\r\n    darkred: \"#8b0000\",\r\n    darksalmon: \"#e9967a\",\r\n    darkseagreen: \"#8fbc8f\",\r\n    darkslateblue: \"#483d8b\",\r\n    darkslategray: \"#2f4f4f\",\r\n    darkturquoise: \"#00ced1\",\r\n    darkviolet: \"#9400d3\",\r\n    deeppink: \"#ff1493\",\r\n    deepskyblue: \"#00bfff\",\r\n    dimgray: \"#696969\",\r\n    dodgerblue: \"#1e90ff\",\r\n    firebrick: \"#b22222\",\r\n    floralwhite: \"#fffaf0\",\r\n    forestgreen: \"#228b22\",\r\n    fuchsia: \"#ff00ff\",\r\n    gainsboro: \"#dcdcdc\",\r\n    ghostwhite: \"#f8f8ff\",\r\n    gold: \"#ffd700\",\r\n    goldenrod: \"#daa520\",\r\n    gray: \"#808080\",\r\n    green: \"#008000\",\r\n    greenyellow: \"#adff2f\",\r\n    honeydew: \"#f0fff0\",\r\n    hotpink: \"#ff69b4\",\r\n    \"indianred \": \"#cd5c5c\",\r\n    indigo: \"#4b0082\",\r\n    ivory: \"#fffff0\",\r\n    khaki: \"#f0e68c\",\r\n    lavender: \"#e6e6fa\",\r\n    lavenderblush: \"#fff0f5\",\r\n    lawngreen: \"#7cfc00\",\r\n    lemonchiffon: \"#fffacd\",\r\n    lightblue: \"#add8e6\",\r\n    lightcoral: \"#f08080\",\r\n    lightcyan: \"#e0ffff\",\r\n    lightgoldenrodyellow: \"#fafad2\",\r\n    lightgrey: \"#d3d3d3\",\r\n    lightgreen: \"#90ee90\",\r\n    lightpink: \"#ffb6c1\",\r\n    lightsalmon: \"#ffa07a\",\r\n    lightseagreen: \"#20b2aa\",\r\n    lightskyblue: \"#87cefa\",\r\n    lightslategray: \"#778899\",\r\n    lightsteelblue: \"#b0c4de\",\r\n    lightyellow: \"#ffffe0\",\r\n    lime: \"#00ff00\",\r\n    limegreen: \"#32cd32\",\r\n    linen: \"#faf0e6\",\r\n    magenta: \"#ff00ff\",\r\n    maroon: \"#800000\",\r\n    mediumaquamarine: \"#66cdaa\",\r\n    mediumblue: \"#0000cd\",\r\n    mediumorchid: \"#ba55d3\",\r\n    mediumpurple: \"#9370d8\",\r\n    mediumseagreen: \"#3cb371\",\r\n    mediumslateblue: \"#7b68ee\",\r\n    mediumspringgreen: \"#00fa9a\",\r\n    mediumturquoise: \"#48d1cc\",\r\n    mediumvioletred: \"#c71585\",\r\n    midnightblue: \"#191970\",\r\n    mintcream: \"#f5fffa\",\r\n    mistyrose: \"#ffe4e1\",\r\n    moccasin: \"#ffe4b5\",\r\n    navajowhite: \"#ffdead\",\r\n    navy: \"#000080\",\r\n    oldlace: \"#fdf5e6\",\r\n    olive: \"#808000\",\r\n    olivedrab: \"#6b8e23\",\r\n    orange: \"#ffa500\",\r\n    orangered: \"#ff4500\",\r\n    orchid: \"#da70d6\",\r\n    palegoldenrod: \"#eee8aa\",\r\n    palegreen: \"#98fb98\",\r\n    paleturquoise: \"#afeeee\",\r\n    palevioletred: \"#d87093\",\r\n    papayawhip: \"#ffefd5\",\r\n    peachpuff: \"#ffdab9\",\r\n    peru: \"#cd853f\",\r\n    pink: \"#ffc0cb\",\r\n    plum: \"#dda0dd\",\r\n    powderblue: \"#b0e0e6\",\r\n    purple: \"#800080\",\r\n    rebeccapurple: \"#663399\",\r\n    red: \"#ff0000\",\r\n    rosybrown: \"#bc8f8f\",\r\n    royalblue: \"#4169e1\",\r\n    saddlebrown: \"#8b4513\",\r\n    salmon: \"#fa8072\",\r\n    sandybrown: \"#f4a460\",\r\n    seagreen: \"#2e8b57\",\r\n    seashell: \"#fff5ee\",\r\n    sienna: \"#a0522d\",\r\n    silver: \"#c0c0c0\",\r\n    skyblue: \"#87ceeb\",\r\n    slateblue: \"#6a5acd\",\r\n    slategray: \"#708090\",\r\n    snow: \"#fffafa\",\r\n    springgreen: \"#00ff7f\",\r\n    steelblue: \"#4682b4\",\r\n    tan: \"#d2b48c\",\r\n    teal: \"#008080\",\r\n    thistle: \"#d8bfd8\",\r\n    tomato: \"#ff6347\",\r\n    turquoise: \"#40e0d0\",\r\n    violet: \"#ee82ee\",\r\n    wheat: \"#f5deb3\",\r\n    white: \"#ffffff\",\r\n    whitesmoke: \"#f5f5f5\",\r\n    yellow: \"#ffff00\",\r\n    yellowgreen: \"#9acd32\",\r\n  };\r\n\r\n  if (typeof colors[color.toLowerCase()] != \"undefined\")\r\n    return colors[color.toLowerCase()];\r\n\r\n  return false;\r\n};\r\n","/* eslint no-unused-vars: 0 */\r\n\r\n/**\r\n * \"Abstract\" like base class for a Canvas tool\r\n */\r\nclass FabricCanvasTool {\r\n  constructor(canvas) {\r\n    this._canvas = canvas;\r\n  }\r\n\r\n  configureCanvas(props) {}\r\n\r\n  doMouseUp(event) {}\r\n\r\n  doMouseDown(event) {}\r\n\r\n  doMouseMove(event) {}\r\n\r\n  doMouseOut(event) {}\r\n}\r\n\r\nexport default FabricCanvasTool;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass Index extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    this._width = props.lineWidth;\r\n    this._color = props.lineColor;\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    this.isDown = true;\r\n    let canvas = this._canvas;\r\n    var pointer = canvas.getPointer(o.e);\r\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y];\r\n    this.line = new fabric.Line(points, {\r\n      strokeWidth: this._width,\r\n      fill: this._color,\r\n      stroke: this._color,\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      selectable: false,\r\n      evented: false,\r\n    });\r\n\r\n    this.head = new fabric.Triangle({\r\n      fill: this._color,\r\n      left: pointer.x,\r\n      top: pointer.y,\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      height: 3 * this._width,\r\n      width: 3 * this._width,\r\n      selectable: false,\r\n      evented: false,\r\n      angle: 90,\r\n    });\r\n\r\n    canvas.add(this.line);\r\n    canvas.add(this.head);\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    var pointer = canvas.getPointer(o.e);\r\n    this.line.set({ x2: pointer.x, y2: pointer.y });\r\n    this.line.setCoords();\r\n\r\n    let x_delta = pointer.x - this.line.x1;\r\n    let y_delta = pointer.y - this.line.y1;\r\n\r\n    this.head.set({\r\n      left: pointer.x,\r\n      top: pointer.y,\r\n      angle: 90 + (Math.atan2(y_delta, x_delta) * 180) / Math.PI,\r\n    });\r\n\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n    let canvas = this._canvas;\r\n\r\n    canvas.remove(this.line);\r\n    canvas.remove(this.head);\r\n    let arrow = new fabric.Group([this.line, this.head]);\r\n    canvas.add(arrow);\r\n  }\r\n\r\n  doMouseOut(o) {\r\n    this.isDown = false;\r\n  }\r\n}\r\n\r\nexport default Index;\r\n","export default {\r\n  Circle: \"circle\",\r\n  Line: \"line\",\r\n  Arrow: \"arrow\",\r\n  Pencil: \"pencil\",\r\n  Rectangle: \"rectangle\",\r\n  RectangleLabel: \"rectangle-label\",\r\n  Select: \"select\",\r\n  Pan: \"pan\",\r\n  Highlighter: \"highlighter\",\r\n  DefaultTool: \"default-tool\",\r\n};\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"./fabrictool\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass DefaultTool extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    canvas.discardActiveObject();\r\n    canvas.defaultCursor = \"pointer\";\r\n    canvas.renderAll();\r\n  }\r\n}\r\n\r\nexport default DefaultTool;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\n\r\nclass Select extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = false;\r\n    canvas.selection = true;\r\n    canvas.forEachObject((o) => {\r\n      o.selectable = o.evented = true;\r\n    });\r\n  }\r\n}\r\n\r\nexport default Select;\r\n","import FabricCanvasTool from \"../fabrictool\";\r\n\r\nclass Pencil extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    this._canvas.isDrawingMode = true;\r\n    this._canvas.freeDrawingBrush.width = props.lineWidth;\r\n    this._canvas.freeDrawingBrush.color = props.lineColor;\r\n  }\r\n}\r\n\r\nexport default Pencil;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass Line extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    this._width = props.lineWidth;\r\n    this._color = props.lineColor;\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    this.isDown = true;\r\n    let canvas = this._canvas;\r\n    var pointer = canvas.getPointer(o.e);\r\n    var points = [pointer.x, pointer.y, pointer.x, pointer.y];\r\n    this.line = new fabric.Line(points, {\r\n      strokeWidth: this._width,\r\n      fill: this._color,\r\n      stroke: this._color,\r\n      originX: \"center\",\r\n      originY: \"center\",\r\n      selectable: false,\r\n      evented: false,\r\n    });\r\n    canvas.add(this.line);\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    var pointer = canvas.getPointer(o.e);\r\n    this.line.set({ x2: pointer.x, y2: pointer.y });\r\n    this.line.setCoords();\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n  }\r\n\r\n  doMouseOut(o) {\r\n    this.isDown = false;\r\n  }\r\n}\r\n\r\nexport default Line;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass Rectangle extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    this._width = props.lineWidth;\r\n    this._color = props.lineColor;\r\n    this._fill = props.fillColor;\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    let canvas = this._canvas;\r\n    this.isDown = true;\r\n    let pointer = canvas.getPointer(o.e);\r\n    this.startX = pointer.x;\r\n    this.startY = pointer.y;\r\n    this.rect = new fabric.Rect({\r\n      left: this.startX,\r\n      top: this.startY,\r\n      originX: \"left\",\r\n      originY: \"top\",\r\n      width: pointer.x - this.startX,\r\n      height: pointer.y - this.startY,\r\n      stroke: this._color,\r\n      strokeWidth: this._width,\r\n      fill: this._fill,\r\n      transparentCorners: false,\r\n      selectable: false,\r\n      evented: false,\r\n      strokeUniform: true,\r\n      noScaleCache: false,\r\n      angle: 0,\r\n    });\r\n    canvas.add(this.rect);\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    let pointer = canvas.getPointer(o.e);\r\n    if (this.startX > pointer.x) {\r\n      this.rect.set({ left: Math.abs(pointer.x) });\r\n    }\r\n    if (this.startY > pointer.y) {\r\n      this.rect.set({ top: Math.abs(pointer.y) });\r\n    }\r\n    this.rect.set({ width: Math.abs(this.startX - pointer.x) });\r\n    this.rect.set({ height: Math.abs(this.startY - pointer.y) });\r\n    this.rect.setCoords();\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n  }\r\n}\r\n\r\nexport default Rectangle;\r\n","/* eslint no-unused-vars: 0 */\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass RectangleLabelObject {\r\n  constructor(canvas, text, rectProps, textProps) {\r\n    this._canvas = canvas;\r\n    this._text = text;\r\n    this._rectObj = new fabric.Rect(rectProps);\r\n    this._textObj = new fabric.Textbox(text, textProps);\r\n    canvas.on({ \"object:scaling\": this.update });\r\n    canvas.on({ \"object:moving\": this.update });\r\n  }\r\n\r\n  update = (e) => {\r\n    //e.target.set({scaleX:1, scaleY:1})\r\n    if (!this._textObj || !this._rectObj) return;\r\n    if (e.target === this._rectObj) {\r\n      this._textObj.set({\r\n        width: this._rectObj.getScaledWidth(),\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        top: this._rectObj.top - this._textObj.getScaledHeight(),\r\n        left: this._rectObj.left,\r\n      });\r\n    }\r\n  };\r\n\r\n  setText(text) {\r\n    this._text = text;\r\n    this._textObj.set({ text });\r\n  }\r\n}\r\n\r\nexport default RectangleLabelObject;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\nimport RectangleLabelObject from \"./rectangle-label-object\";\r\n\r\nclass RectangleLabel extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    this._width = props.lineWidth;\r\n    this._color = props.lineColor;\r\n    this._fill = props.fillColor;\r\n    this._textString = props.text;\r\n    this._maxFontSize = 12;\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    let canvas = this._canvas;\r\n    this.isDown = true;\r\n    let pointer = canvas.getPointer(o.e);\r\n    this.startX = pointer.x;\r\n    this.startY = pointer.y;\r\n    this.rectangleLabel = new RectangleLabelObject(\r\n      canvas,\r\n      \"New drawing\",\r\n      {\r\n        left: this.startX,\r\n        top: this.startY,\r\n        originX: \"left\",\r\n        originY: \"top\",\r\n        width: pointer.x - this.startX,\r\n        height: pointer.y - this.startY,\r\n        stroke: this._color,\r\n        strokeWidth: this._width,\r\n        fill: this._fill,\r\n        transparentCorners: false,\r\n        selectable: false,\r\n        evented: false,\r\n        strokeUniform: true,\r\n        noScaleCache: false,\r\n        angle: 0,\r\n      },\r\n      {\r\n        left: this.startX,\r\n        top: this.startY - 12,\r\n        originX: \"left\",\r\n        originY: \"top\",\r\n        width: pointer.x - this.startX - this._width,\r\n        height: canvas.height / 3,\r\n        fontSize: this._maxFontSize,\r\n        noScaleCache: false,\r\n        backgroundColor: this._color,\r\n        transparentCorners: true,\r\n        hasControls: false,\r\n        angle: 0,\r\n      }\r\n    );\r\n\r\n    if (this._objects && this._objects.length > 0)\r\n      this._objects.push(this.rectangleLabel);\r\n    else this._objects = [this.rectangleLabel];\r\n\r\n    while (this.rectangleLabel._textObj.height > canvas.height / 3) {\r\n      this.rectangleLabel._textObj.set({\r\n        fontSize: this.rectangleLabel._textObj.fontSize - 1,\r\n        top: this.startY - this.rectangleLabel._textObj.fontSize - 12,\r\n      });\r\n    }\r\n\r\n    canvas.add(this.rectangleLabel._rectObj);\r\n    canvas.add(this.rectangleLabel._textObj);\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    let pointer = canvas.getPointer(o.e);\r\n    if (this.startX > pointer.x) {\r\n      this.rectangleLabel._rectObj.set({ left: Math.abs(pointer.x) });\r\n      this.rectangleLabel._textObj.set({ left: Math.abs(pointer.x) });\r\n    }\r\n    if (this.startY > pointer.y) {\r\n      this.rectangleLabel._rectObj.set({ left: Math.abs(pointer.x) });\r\n      this.rectangleLabel._textObj.set({ top: Math.abs(pointer.y) });\r\n    }\r\n    this.rectangleLabel._textObj.setCoords();\r\n    this.rectangleLabel._rectObj.set({\r\n      width: Math.abs(this.startX - pointer.x),\r\n    });\r\n    this.rectangleLabel._textObj.set({\r\n      width: this.rectangleLabel._rectObj.getScaledWidth(),\r\n    });\r\n    this.rectangleLabel._rectObj.set({\r\n      height: Math.abs(this.startY - pointer.y),\r\n    });\r\n    this.rectangleLabel._rectObj.setCoords();\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n    let canvas = this._canvas;\r\n\r\n    // var group = new fabric.Group([this.rectangleLabel._rectObj,this.rectangleLabel._textObj]);\r\n    // canvas.remove(this.rectangleLabel._rectObj);\r\n    // canvas.remove(this.rectangleLabel._textObj);\r\n    // canvas.add(group);\r\n    canvas.renderAll();\r\n  }\r\n}\r\n\r\nexport default RectangleLabel;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\nimport { linearDistance } from \"../../utils\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass Circle extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    this._width = props.lineWidth;\r\n    this._color = props.lineColor;\r\n    this._fill = props.fillColor;\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    let canvas = this._canvas;\r\n    this.isDown = true;\r\n    let pointer = canvas.getPointer(o.e);\r\n    [this.startX, this.startY] = [pointer.x, pointer.y];\r\n    this.circle = new fabric.Circle({\r\n      left: this.startX,\r\n      top: this.startY,\r\n      originX: \"left\",\r\n      originY: \"center\",\r\n      strokeWidth: this._width,\r\n      stroke: this._color,\r\n      fill: this._fill,\r\n      selectable: false,\r\n      evented: false,\r\n      radius: 1,\r\n    });\r\n    canvas.add(this.circle);\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    let pointer = canvas.getPointer(o.e);\r\n    this.circle.set({\r\n      radius:\r\n        linearDistance(\r\n          { x: this.startX, y: this.startY },\r\n          { x: pointer.x, y: pointer.y }\r\n        ) / 2,\r\n      angle:\r\n        (Math.atan2(pointer.y - this.startY, pointer.x - this.startX) * 180) /\r\n        Math.PI,\r\n    });\r\n    this.circle.setCoords();\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n  }\r\n}\r\n\r\nexport default Circle;\r\n","/*eslint no-unused-vars: 0*/\r\n\r\nimport FabricCanvasTool from \"../fabrictool\";\r\n\r\nconst fabric = require(\"fabric\").fabric;\r\n\r\nclass Pan extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    let canvas = this._canvas;\r\n    canvas.isDrawingMode = canvas.selection = false;\r\n    canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n    //Change the cursor to the move grabber\r\n    canvas.defaultCursor = \"move\";\r\n  }\r\n\r\n  doMouseDown(o) {\r\n    let canvas = this._canvas;\r\n    this.isDown = true;\r\n    let pointer = canvas.getPointer(o.e);\r\n    this.startX = pointer.x;\r\n    this.startY = pointer.y;\r\n  }\r\n\r\n  doMouseMove(o) {\r\n    if (!this.isDown) return;\r\n    let canvas = this._canvas;\r\n    let pointer = canvas.getPointer(o.e);\r\n\r\n    canvas.relativePan({\r\n      x: pointer.x - this.startX,\r\n      y: pointer.y - this.startY,\r\n    });\r\n    canvas.renderAll();\r\n  }\r\n\r\n  doMouseUp(o) {\r\n    this.isDown = false;\r\n  }\r\n}\r\n\r\nexport default Pan;\r\n","import FabricCanvasTool from \"../fabrictool\";\r\nimport { hexToRgbA, colorNameToHex } from \"../../utils\";\r\n\r\nclass Highlighter extends FabricCanvasTool {\r\n  configureCanvas(props) {\r\n    this._canvas.isDrawingMode = true;\r\n    this._canvas.freeDrawingBrush.width = props.lineWidth;\r\n    this._canvas.freeDrawingBrush.color =\r\n      props.lineColor.indexOf(\"#\") > -1\r\n        ? hexToRgbA(props.lineColor)\r\n        : hexToRgbA(colorNameToHex(props.lineColor));\r\n  }\r\n}\r\n\r\nexport default Highlighter;\r\n","/*eslint no-unused-vars: 0*/\r\n// @ts-nocheck\r\n\r\nimport React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport History from \"../../history\";\r\nimport { uuid4 } from \"../../utils\";\r\nimport Arrow from \"./../../tools/Arrow\";\r\nimport Tool from \"./../../tools\";\r\nimport DefaultTool from \"./../../tools/defaul-tool\";\r\nimport Select from \"./../../tools/Select\";\r\nimport Pencil from \"./../../tools/Pencil\";\r\nimport Line from \"./../../tools/Line\";\r\nimport Rectangle from \"./../../tools/Rectangle\";\r\nimport RectangleLabel from \"./../../tools/Rectangle/rectangle-label\";\r\nimport Circle from \"./../../tools/Circle\";\r\nimport Pan from \"./../../tools/Pan\";\r\nimport Highlighter from \"./../../tools/Highlighter\";\r\nimport { fabric } from \"fabric\";\r\n\r\n/**\r\n * Sketch Tool based on FabricJS for React Applications\r\n */\r\nclass SketchField extends PureComponent {\r\n  static propTypes = {\r\n    // the color of the line\r\n    lineColor: PropTypes.string,\r\n    // The width of the line\r\n    lineWidth: PropTypes.number,\r\n    // the fill color of the shape when applicable\r\n    fillColor: PropTypes.string,\r\n    // the background color of the sketch\r\n    backgroundColor: PropTypes.string,\r\n    // the opacity of the object\r\n    opacity: PropTypes.number,\r\n    // number of undo/redo steps to maintain\r\n    undoSteps: PropTypes.number,\r\n    // The tool to use, can be pencil, rectangle, circle, brush;\r\n    tool: PropTypes.string,\r\n    // image format when calling toDataURL\r\n    imageFormat: PropTypes.string,\r\n    // Sketch data for controlling sketch from\r\n    // outside the component\r\n    value: PropTypes.object,\r\n    // Set to true if you wish to force load the given value, even if it is  the same\r\n    forceValue: PropTypes.bool,\r\n    // Specify some width correction which will be applied on auto resize\r\n    widthCorrection: PropTypes.number,\r\n    // Specify some height correction which will be applied on auto resize\r\n    heightCorrection: PropTypes.number,\r\n    // Specify action on change\r\n    onChange: PropTypes.func,\r\n    // Default initial value\r\n    defaultValue: PropTypes.object,\r\n    // Sketch width\r\n    width: PropTypes.number,\r\n    // Sketch height\r\n    height: PropTypes.number,\r\n    // event object added\r\n    onObjectAdded: PropTypes.func,\r\n    // event object modified\r\n    onObjectModified: PropTypes.func,\r\n    // event object removed\r\n    onObjectRemoved: PropTypes.func,\r\n    // event mouse down\r\n    onMouseDown: PropTypes.func,\r\n    // event mouse move\r\n    onMouseMove: PropTypes.func,\r\n    // event mouse up\r\n    onMouseUp: PropTypes.func,\r\n    // event mouse out\r\n    onMouseOut: PropTypes.func,\r\n    // event object move\r\n    onObjectMoving: PropTypes.func,\r\n    // event object scale\r\n    onObjectScaling: PropTypes.func,\r\n    // event object rotating\r\n    onObjectRotating: PropTypes.func,\r\n    // Class name to pass to container div of canvas\r\n    className: PropTypes.string,\r\n    // Style options to pass to container div of canvas\r\n    style: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    lineColor: \"black\",\r\n    lineWidth: 10,\r\n    fillColor: \"transparent\",\r\n    backgroundColor: \"transparent\",\r\n    opacity: 1.0,\r\n    undoSteps: 25,\r\n    tool: null,\r\n    widthCorrection: 0,\r\n    heightCorrection: 0,\r\n    forceValue: false,\r\n    onObjectAdded: () => null,\r\n    onObjectModified: () => null,\r\n    onObjectRemoved: () => null,\r\n    onMouseDown: () => null,\r\n    onMouseMove: () => null,\r\n    onMouseUp: () => null,\r\n    onMouseOut: () => null,\r\n    onObjectMoving: () => null,\r\n    onObjectScaling: () => null,\r\n    onObjectRotating: () => null,\r\n  };\r\n\r\n  state = {\r\n    action: true,\r\n  };\r\n  _initTools = (fabricCanvas) => {\r\n    this._tools = {};\r\n    this._tools[Tool.Select] = new Select(fabricCanvas);\r\n    this._tools[Tool.Pencil] = new Pencil(fabricCanvas);\r\n    this._tools[Tool.Line] = new Line(fabricCanvas);\r\n    this._tools[Tool.Arrow] = new Arrow(fabricCanvas);\r\n    this._tools[Tool.Rectangle] = new Rectangle(fabricCanvas);\r\n    this._tools[Tool.RectangleLabel] = new RectangleLabel(fabricCanvas);\r\n    this._tools[Tool.Circle] = new Circle(fabricCanvas);\r\n    this._tools[Tool.Pan] = new Pan(fabricCanvas);\r\n    this._tools[Tool.Highlighter] = new Highlighter(fabricCanvas);\r\n    this._tools[Tool.DefaultTool] = new DefaultTool(fabricCanvas);\r\n  };\r\n\r\n  /**\r\n   * Enable touch Scrolling on Canvas\r\n   */\r\n  enableTouchScroll = () => {\r\n    let canvas = this._fc;\r\n    if (canvas.allowTouchScrolling) return;\r\n    canvas.allowTouchScrolling = true;\r\n  };\r\n\r\n  /**\r\n   * Disable touch Scrolling on Canvas\r\n   */\r\n  disableTouchScroll = () => {\r\n    let canvas = this._fc;\r\n    if (canvas.allowTouchScrolling) {\r\n      canvas.allowTouchScrolling = false;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Add an image as object to the canvas\r\n   *\r\n   * @param dataUrl the image url or Data Url\r\n   * @param options object to pass and change some options when loading image, the format of the object is:\r\n   *\r\n   * {\r\n   *   left: <Number: distance from left of canvas>,\r\n   *   top: <Number: distance from top of canvas>,\r\n   *   scale: <Number: initial scale of image>\r\n   * }\r\n   */\r\n  addImg = (dataUrl, options = {}) => {\r\n    let canvas = this._fc;\r\n    fabric.Image.fromURL(dataUrl, (oImg) => {\r\n      let opts = {\r\n        left: Math.random() * (canvas.getWidth() - oImg.width * 0.5),\r\n        top: Math.random() * (canvas.getHeight() - oImg.height * 0.5),\r\n        scale: 0.5,\r\n      };\r\n      Object.assign(opts, options);\r\n      oImg.scale(opts.scale);\r\n      oImg.set({\r\n        left: opts.left,\r\n        top: opts.top,\r\n      });\r\n      canvas.add(oImg);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Action when an object is added to the canvas\r\n   */\r\n  _onObjectAdded = (e) => {\r\n    const { onObjectAdded } = this.props;\r\n    if (!this.state.action) {\r\n      this.setState({ action: true });\r\n      return;\r\n    }\r\n    let obj = e.target;\r\n    obj.__version = 1;\r\n    // record current object state as json and save as originalState\r\n    let objState = obj.toJSON();\r\n    obj.__originalState = objState;\r\n    let state = JSON.stringify(objState);\r\n    // object, previous state, current state\r\n    this._history.keep([obj, state, state]);\r\n    onObjectAdded(e);\r\n  };\r\n\r\n  /**\r\n   * Action when an object is moving around inside the canvas\r\n   */\r\n  _onObjectMoving = (e) => {\r\n    const { onObjectMoving } = this.props;\r\n    onObjectMoving(e);\r\n  };\r\n\r\n  /**\r\n   * Action when an object is scaling inside the canvas\r\n   */\r\n  _onObjectScaling = (e) => {\r\n    const { onObjectScaling } = this.props;\r\n    onObjectScaling(e);\r\n  };\r\n\r\n  /**\r\n   * Action when an object is rotating inside the canvas\r\n   */\r\n  _onObjectRotating = (e) => {\r\n    const { onObjectRotating } = this.props;\r\n    onObjectRotating(e);\r\n  };\r\n\r\n  _onObjectModified = (e) => {\r\n    const { onObjectModified } = this.props;\r\n    let obj = e.target;\r\n    obj.__version += 1;\r\n    let prevState = JSON.stringify(obj.__originalState);\r\n    let objState = obj.toJSON();\r\n    // record current object state as json and update to originalState\r\n    obj.__originalState = objState;\r\n    let currState = JSON.stringify(objState);\r\n    this._history.keep([obj, prevState, currState]);\r\n    onObjectModified(e);\r\n  };\r\n\r\n  /**\r\n   * Action when an object is removed from the canvas\r\n   */\r\n  _onObjectRemoved = (e) => {\r\n    const { onObjectRemoved } = this.props;\r\n    let obj = e.target;\r\n    if (obj.__removed) {\r\n      obj.__version += 1;\r\n      return;\r\n    }\r\n    obj.__version = 0;\r\n    onObjectRemoved(e);\r\n  };\r\n\r\n  /**\r\n   * Action when the mouse button is pressed down\r\n   */\r\n  _onMouseDown = (e) => {\r\n    const { onMouseDown } = this.props;\r\n    this._selectedTool.doMouseDown(e);\r\n    onMouseDown(e);\r\n  };\r\n\r\n  /**\r\n   * Action when the mouse cursor is moving around within the canvas\r\n   */\r\n  _onMouseMove = (e) => {\r\n    const { onMouseMove } = this.props;\r\n    this._selectedTool.doMouseMove(e);\r\n    onMouseMove(e);\r\n  };\r\n\r\n  /**\r\n   * Action when the mouse cursor is moving out from the canvas\r\n   */\r\n  _onMouseOut = (e) => {\r\n    const { onMouseOut } = this.props;\r\n    this._selectedTool.doMouseOut(e);\r\n    if (this.props.onChange) {\r\n      let onChange = this.props.onChange;\r\n      setTimeout(() => {\r\n        onChange(e.e);\r\n      }, 10);\r\n    }\r\n    onMouseOut(e);\r\n  };\r\n\r\n  _onMouseUp = (e) => {\r\n    const { onMouseUp } = this.props;\r\n    this._selectedTool.doMouseUp(e);\r\n    // Update the final state to new-generated object\r\n    // Ignore Path object since it would be created after mouseUp\r\n    // Assumed the last object in canvas.getObjects() in the newest object\r\n    if (this.props.tool !== Tool.Pencil) {\r\n      const canvas = this._fc;\r\n      const objects = canvas.getObjects();\r\n      const newObj = objects[objects.length - 1];\r\n      if (newObj && newObj.__version === 1) {\r\n        newObj.__originalState = newObj.toJSON();\r\n      }\r\n    }\r\n    if (this.props.onChange) {\r\n      let onChange = this.props.onChange;\r\n      setTimeout(() => {\r\n        onChange(e.e);\r\n      }, 10);\r\n    }\r\n    onMouseUp(e);\r\n  };\r\n\r\n  /**\r\n   * Track the resize of the window and update our state\r\n   *\r\n   * @param e the resize event\r\n   * @private\r\n   */\r\n  _resize = (e, canvasWidth = null, canvasHeight = null) => {\r\n    if (e) e.preventDefault();\r\n    let { widthCorrection, heightCorrection } = this.props;\r\n    let canvas = this._fc;\r\n    let { offsetWidth, clientHeight } = this._container;\r\n    let prevWidth = canvasWidth || canvas.getWidth();\r\n    let prevHeight = canvasHeight || canvas.getHeight();\r\n    let wfactor = ((offsetWidth - widthCorrection) / prevWidth).toFixed(2);\r\n    let hfactor = ((clientHeight - heightCorrection) / prevHeight).toFixed(2);\r\n    canvas.setWidth(offsetWidth - widthCorrection);\r\n    canvas.setHeight(clientHeight - heightCorrection);\r\n    if (canvas.backgroundImage) {\r\n      // Need to scale background images as well\r\n      let bi = canvas.backgroundImage;\r\n      bi.width = bi.width * wfactor;\r\n      bi.height = bi.height * hfactor;\r\n    }\r\n    let objects = canvas.getObjects();\r\n    for (let i in objects) {\r\n      let obj = objects[i];\r\n      let scaleX = obj.scaleX;\r\n      let scaleY = obj.scaleY;\r\n      let left = obj.left;\r\n      let top = obj.top;\r\n      let tempScaleX = scaleX * wfactor;\r\n      let tempScaleY = scaleY * hfactor;\r\n      let tempLeft = left * wfactor;\r\n      let tempTop = top * hfactor;\r\n      obj.scaleX = tempScaleX;\r\n      obj.scaleY = tempScaleY;\r\n      obj.left = tempLeft;\r\n      obj.top = tempTop;\r\n      obj.setCoords();\r\n    }\r\n    canvas.renderAll();\r\n    canvas.calcOffset();\r\n  };\r\n\r\n  /**\r\n   * Sets the background color for this sketch\r\n   * @param color in rgba or hex format\r\n   */\r\n  _backgroundColor = (color) => {\r\n    if (!color) return;\r\n    let canvas = this._fc;\r\n    canvas.setBackgroundColor(color, () => canvas.renderAll());\r\n  };\r\n\r\n  /**\r\n   * Zoom the drawing by the factor specified\r\n   *\r\n   * The zoom factor is a percentage with regards the original, for example if factor is set to 2\r\n   * it will double the size whereas if it is set to 0.5 it will half the size\r\n   *\r\n   * @param factor the zoom factor\r\n   */\r\n  zoom = (factor) => {\r\n    let canvas = this._fc;\r\n    let objects = canvas.getObjects();\r\n    for (let i in objects) {\r\n      objects[i].scaleX = objects[i].scaleX * factor;\r\n      objects[i].scaleY = objects[i].scaleY * factor;\r\n      objects[i].left = objects[i].left * factor;\r\n      objects[i].top = objects[i].top * factor;\r\n      objects[i].setCoords();\r\n    }\r\n    canvas.renderAll();\r\n    canvas.calcOffset();\r\n  };\r\n\r\n  /**\r\n   * Perform an undo operation on canvas, if it cannot undo it will leave the canvas intact\r\n   */\r\n  undo = () => {\r\n    let history = this._history;\r\n    let [obj, prevState, currState] = history.getCurrent();\r\n    history.undo();\r\n    if (obj.__removed) {\r\n      this.setState({ action: false }, () => {\r\n        this._fc.add(obj);\r\n        obj.__version -= 1;\r\n        obj.__removed = false;\r\n      });\r\n    } else if (obj.__version <= 1) {\r\n      this._fc.remove(obj);\r\n    } else {\r\n      obj.__version -= 1;\r\n      obj.setOptions(JSON.parse(prevState));\r\n      obj.setCoords();\r\n      this._fc.renderAll();\r\n    }\r\n    if (this.props.onChange) {\r\n      this.props.onChange();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Perform a redo operation on canvas, if it cannot redo it will leave the canvas intact\r\n   */\r\n  redo = () => {\r\n    let history = this._history;\r\n    if (history.canRedo()) {\r\n      let canvas = this._fc;\r\n      //noinspection Eslint\r\n      let [obj, prevState, currState] = history.redo();\r\n      if (obj.__version === 0) {\r\n        this.setState({ action: false }, () => {\r\n          canvas.add(obj);\r\n          obj.__version = 1;\r\n        });\r\n      } else {\r\n        obj.__version += 1;\r\n        obj.setOptions(JSON.parse(currState));\r\n      }\r\n      obj.setCoords();\r\n      canvas.renderAll();\r\n      if (this.props.onChange) {\r\n        this.props.onChange();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Delegation method to check if we can perform an undo Operation, useful to disable/enable possible buttons\r\n   *\r\n   * @returns {*} true if we can undo otherwise false\r\n   */\r\n  canUndo = () => {\r\n    return this._history.canUndo();\r\n  };\r\n\r\n  /**\r\n   * Delegation method to check if we can perform a redo Operation, useful to disable/enable possible buttons\r\n   *\r\n   * @returns {*} true if we can redo otherwise false\r\n   */\r\n  canRedo = () => {\r\n    return this._history.canRedo();\r\n  };\r\n\r\n  /**\r\n   * Exports canvas element to a dataurl image. Note that when multiplier is used, cropping is scaled appropriately\r\n   *\r\n   * Available Options are\r\n   * <table style=\"width:100%\">\r\n   *\r\n   * <tr><td><b>Name</b></td><td><b>Type</b></td><td><b>Argument</b></td><td><b>Default</b></td><td><b>Description</b></td></tr>\r\n   * <tr><td>format</td> <td>String</td> <td><optional></td><td>png</td><td>The format of the output image. Either \"jpeg\" or \"png\"</td></tr>\r\n   * <tr><td>quality</td><td>Number</td><td><optional></td><td>1</td><td>Quality level (0..1). Only used for jpeg.</td></tr>\r\n   * <tr><td>multiplier</td><td>Number</td><td><optional></td><td>1</td><td>Multiplier to scale by</td></tr>\r\n   * <tr><td>left</td><td>Number</td><td><optional></td><td></td><td>Cropping left offset. Introduced in v1.2.14</td></tr>\r\n   * <tr><td>top</td><td>Number</td><td><optional></td><td></td><td>Cropping top offset. Introduced in v1.2.14</td></tr>\r\n   * <tr><td>width</td><td>Number</td><td><optional></td><td></td><td>Cropping width. Introduced in v1.2.14</td></tr>\r\n   * <tr><td>height</td><td>Number</td><td><optional></td><td></td><td>Cropping height. Introduced in v1.2.14</td></tr>\r\n   *\r\n   * </table>\r\n   *\r\n   * @returns {String} URL containing a representation of the object in the format specified by options.format\r\n   */\r\n  toDataURL = (options) => this._fc.toDataURL(options);\r\n\r\n  /**\r\n   * Returns JSON representation of canvas\r\n   *\r\n   * @param propertiesToInclude Array <optional> Any properties that you might want to additionally include in the output\r\n   * @returns {string} JSON string\r\n   */\r\n  toJSON = (propertiesToInclude) => this._fc.toJSON(propertiesToInclude);\r\n\r\n  /**\r\n   * Populates canvas with data from the specified JSON.\r\n   *\r\n   * JSON format must conform to the one of fabric.Canvas#toDatalessJSON\r\n   *\r\n   * @param json JSON string or object\r\n   */\r\n  fromJSON = (json) => {\r\n    if (!json) return;\r\n    let canvas = this._fc;\r\n    setTimeout(() => {\r\n      canvas.loadFromJSON(json, () => {\r\n        if (this.props.tool === Tool.DefaultTool) {\r\n          canvas.isDrawingMode = canvas.selection = false;\r\n          canvas.forEachObject((o) => (o.selectable = o.evented = false));\r\n        }\r\n        canvas.renderAll();\r\n        if (this.props.onChange) {\r\n          this.props.onChange();\r\n        }\r\n      });\r\n    }, 100);\r\n  };\r\n\r\n  /**\r\n   * Clear the content of the canvas, this will also clear history but will return the canvas content as JSON to be\r\n   * used as needed in order to undo the clear if possible\r\n   *\r\n   * @param propertiesToInclude Array <optional> Any properties that you might want to additionally include in the output\r\n   * @returns {string} JSON string of the canvas just cleared\r\n   */\r\n  clear = (propertiesToInclude) => {\r\n    let discarded = this.toJSON(propertiesToInclude);\r\n    this._fc.clear();\r\n    this._history.clear();\r\n    return discarded;\r\n  };\r\n\r\n  hasSelection = () => {\r\n    let canvas = this._fc;\r\n    return !!canvas.getActiveObject();\r\n  };\r\n\r\n  clearSelection = () => {\r\n    let canvas = this._fc;\r\n    canvas.discardActiveObject();\r\n    canvas.requestRenderAll();\r\n  };\r\n\r\n  /**\r\n   * Remove selected object from the canvas\r\n   */\r\n  removeSelected = () => {\r\n    let canvas = this._fc;\r\n    let activeObj = canvas.getActiveObject();\r\n    if (activeObj) {\r\n      let selected = [];\r\n      if (activeObj.type === \"activeSelection\") {\r\n        activeObj.forEachObject((obj) => selected.push(obj));\r\n      } else {\r\n        selected.push(activeObj);\r\n      }\r\n      selected.forEach((obj) => {\r\n        obj.__removed = true;\r\n        let objState = obj.toJSON();\r\n        obj.__originalState = objState;\r\n        let state = JSON.stringify(objState);\r\n        this._history.keep([obj, state, state]);\r\n        canvas.remove(obj);\r\n      });\r\n      canvas.discardActiveObject();\r\n      canvas.requestRenderAll();\r\n    }\r\n  };\r\n\r\n  copy = () => {\r\n    let canvas = this._fc;\r\n    canvas.getActiveObject().clone((cloned) => (this._clipboard = cloned));\r\n  };\r\n\r\n  paste = () => {\r\n    // clone again, so you can do multiple copies.\r\n    this._clipboard.clone((clonedObj) => {\r\n      let canvas = this._fc;\r\n      canvas.discardActiveObject();\r\n      clonedObj.set({\r\n        left: clonedObj.left + 10,\r\n        top: clonedObj.top + 10,\r\n        evented: true,\r\n      });\r\n      if (clonedObj.type === \"activeSelection\") {\r\n        // active selection needs a reference to the canvas.\r\n        clonedObj.canvas = canvas;\r\n        clonedObj.forEachObject((obj) => canvas.add(obj));\r\n        clonedObj.setCoords();\r\n      } else {\r\n        canvas.add(clonedObj);\r\n      }\r\n      this._clipboard.top += 10;\r\n      this._clipboard.left += 10;\r\n      canvas.setActiveObject(clonedObj);\r\n      canvas.requestRenderAll();\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Sets the background from the dataUrl given\r\n   *\r\n   * @param dataUrl the dataUrl to be used as a background\r\n   * @param options\r\n   */\r\n  setBackgroundFromDataUrl = (dataUrl, options = {}) => {\r\n    let canvas = this._fc;\r\n    let img = new Image();\r\n    img.setAttribute(\"crossOrigin\", \"anonymous\");\r\n    const { stretched, stretchedX, stretchedY, ...fabricOptions } = options;\r\n    img.onload = () => {\r\n      const imgObj = new fabric.Image(img);\r\n      if (stretched || stretchedX) imgObj.scaleToWidth(canvas.width);\r\n      if (stretched || stretchedY) imgObj.scaleToHeight(canvas.height);\r\n      canvas.setBackgroundImage(imgObj, () => canvas.renderAll(), fabricOptions);\r\n    };\r\n    img.src = dataUrl;\r\n  };\r\n\r\n  addText = (text, options = {}) => {\r\n    let canvas = this._fc;\r\n    let iText = new fabric.IText(text, options);\r\n    let opts = {\r\n      left: (canvas.getWidth() - iText.width) * 0.5,\r\n      top: (canvas.getHeight() - iText.height) * 0.5,\r\n    };\r\n    Object.assign(options, opts);\r\n    iText.set({\r\n      left: options.left,\r\n      top: options.top,\r\n    });\r\n\r\n    canvas.add(iText);\r\n  };\r\n\r\n  callEvent = (e, eventFunction) => {\r\n    if (this._selectedTool) eventFunction(e);\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    let { tool, value, undoSteps, defaultValue, backgroundColor } = this.props;\r\n\r\n    let canvas = (this._fc = new fabric.Canvas(\r\n      this._canvas /*, {\r\n         preserveObjectStacking: false,\r\n         renderOnAddRemove: false,\r\n         skipTargetFind: true\r\n         }*/\r\n    ));\r\n\r\n    this._initTools(canvas);\r\n\r\n    // set initial backgroundColor\r\n    this._backgroundColor(backgroundColor);\r\n\r\n    let selectedTool = this._tools[tool];\r\n    if (selectedTool) selectedTool.configureCanvas(this.props);\r\n    this._selectedTool = selectedTool;\r\n\r\n    // Control resize\r\n    window.addEventListener(\"resize\", this._resize, false);\r\n\r\n    // Initialize History, with maximum number of undo steps\r\n    this._history = new History(undoSteps);\r\n\r\n    // Events binding\r\n    canvas.on(\"object:added\", (e) => this.callEvent(e, this._onObjectAdded));\r\n    canvas.on(\"object:modified\", (e) => this.callEvent(e, this._onObjectModified));\r\n    canvas.on(\"object:removed\", (e) => this.callEvent(e, this._onObjectRemoved));\r\n    canvas.on(\"mouse:down\", (e) => this.callEvent(e, this._onMouseDown));\r\n    canvas.on(\"mouse:move\", (e) => this.callEvent(e, this._onMouseMove));\r\n    canvas.on(\"mouse:up\", (e) => this.callEvent(e, this._onMouseUp));\r\n    canvas.on(\"mouse:out\", (e) => this.callEvent(e, this._onMouseOut));\r\n    canvas.on(\"object:moving\", (e) => this.callEvent(e, this._onObjectMoving));\r\n    canvas.on(\"object:scaling\", (e) => this.callEvent(e, this._onObjectScaling));\r\n    canvas.on(\"object:rotating\", (e) => this.callEvent(e, this._onObjectRotating));\r\n    // IText Events fired on Adding Text\r\n    // canvas.on(\"text:event:changed\", console.log)\r\n    // canvas.on(\"text:selection:changed\", console.log)\r\n    // canvas.on(\"text:editing:entered\", console.log)\r\n    // canvas.on(\"text:editing:exited\", console.log)\r\n\r\n    this.disableTouchScroll();\r\n\r\n    this._resize();\r\n\r\n    // initialize canvas with controlled value if exists\r\n    (value || defaultValue) && this.fromJSON(value || defaultValue);\r\n  };\r\n\r\n  componentWillUnmount = () => window.removeEventListener(\"resize\", this._resize);\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if (\r\n      this.props.width !== prevProps.width ||\r\n      this.props.height !== prevProps.height\r\n    ) {\r\n      this._resize();\r\n    }\r\n\r\n    if (this.props.tool !== prevProps.tool) {\r\n      this._selectedTool = this._tools[this.props.tool];\r\n      //Bring the cursor back to default if it is changed by a tool\r\n      this._fc.defaultCursor = \"default\";\r\n      if (this._selectedTool) {\r\n        this._selectedTool.configureCanvas(this.props);\r\n      }\r\n    }\r\n\r\n    if (this.props.backgroundColor !== prevProps.backgroundColor) {\r\n      this._backgroundColor(this.props.backgroundColor);\r\n    }\r\n\r\n    if (\r\n      this.props.value !== prevProps.value ||\r\n      (this.props.value && this.props.forceValue)\r\n    ) {\r\n      this.fromJSON(this.props.value);\r\n    }\r\n  };\r\n\r\n  render = () => {\r\n    let { className, style, width, height } = this.props;\r\n\r\n    let canvasDivStyle = Object.assign(\r\n      {},\r\n      style ? style : {},\r\n      width ? { width: width } : {},\r\n      height ? { height: height } : { height: 512 }\r\n    );\r\n    return (\r\n      <div\r\n        className={className}\r\n        ref={(c) => (this._container = c)}\r\n        style={canvasDivStyle}>\r\n        <canvas id={uuid4()} ref={(c) => (this._canvas = c)}>\r\n          Sorry, Canvas HTML5 element is not supported by your browser :(\r\n        </canvas>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nexport default SketchField;\r\n","import React, { useState } from \"react\";\r\nimport { ChromePicker } from \"react-color\";\r\n \r\nconst Picker=({handle})=>{\r\nconst [color,setColor]=useState('black');\r\n    return(\r\n        <ChromePicker\r\n        color={color}\r\n        onChange={updatedColor=>{handle(updatedColor);setColor(updatedColor)}}\r\n        />\r\n    )\r\n}\r\nexport default Picker;","import React, { useState,useRef } from 'react';\r\nimport {BottomSheet} from 'react-spring-bottom-sheet';\r\nimport {BsPenFill} from 'react-icons/bs';\r\nimport {IoMdUndo,IoMdRedo} from 'react-icons/io'\r\nimport { ChromePicker } from 'react-color';\r\nimport { SketchField } from './react-sketch/src/components/SketchField/index';\r\nimport './Styles.css'\r\nimport Picker from './Colorpicker';\r\nimport { colors } from '@material-ui/core';\r\nconst Bs=React.forwardRef((props)=>{\r\n    const {open,onDismiss,handleClick,handle,state}=props;\r\n    const defaultSketchValue = {\r\n        background: '#ffffff'\r\n      }\r\nconst sketchRef=useRef();\r\nreturn(\r\n<div>\r\n <div className=\"Button\">\r\n     <button onClick={sketchRef?.current?.undo}><h3>Undo</h3></button> \r\n     <button onClick={sketchRef?.current?.redo}><h3>Redo</h3></button>\r\n    <button onClick={sketchRef?.current?.addText('text')}><h3>Text</h3></button>  \r\n</div> \r\n<BottomSheet \r\nopen={open}\r\nonDismiss={onDismiss}\r\nsnapPoints={({ minHeight }) => minHeight}\r\n>\r\n<div className='InsideBottomSheet'>\r\n    <div className=\"Button\">\r\n    <button onClick={()=>{handleClick('Pencil')}}><h3>Pencil</h3></button>\r\n    </div>\r\n    <div className=\"Button\">\r\n    <button onClick={()=>{handleClick('Line')}}> <h3>Line</h3></button>\r\n    </div>\r\n    <div className=\"Button\">\r\n    <button onClick={()=>{handleClick('Rectangle')}}><h3>Rectangle</h3></button>\r\n    </div>\r\n    <div className=\"Button\">\r\n    <button onClick={()=>{handleClick('Circle')}}><h3>Circle</h3></button>\r\n    </div> \r\n    <div className=\"Button\">\r\n    <button onClick={()=>{handleClick('Pan')}} > <h3>Pan</h3></button>\r\n    </div>\r\n    <div className=\"Button\">\r\n    <button><h3><Picker\r\n   handle={handle}\r\n    /></h3></button>\r\n    </div>\r\n</div>\r\n</BottomSheet>\r\n<div style={{background: '#000', padding: 10}}>\r\n              <SketchField  \r\n            ref={sketchRef}\r\n            // onChange={onChangeSketch}\r\n            width={state?.sketchWidth}\r\n            height={state?.sketchHeight}\r\n            tool={state?.tool}\r\n            lineColor={state?.lineColor}\r\n            lineWidth={state?.lineWidth}\r\n            fillColor={\r\n              state?.fillWithColor ? state?.fillColor : 'transparent'\r\n            }\r\n            backgroundColor={state?.backgroundColor}\r\n            defaultValue={defaultSketchValue}\r\n          />\r\n          </div>\r\n</div>\r\n\r\n)})\r\nexport default Bs;"," import { SettingsPowerRounded } from '@material-ui/icons';\r\nimport React, { useState } from 'react';\r\n import ReactPlayer from 'react-player';\r\n import Bs from './BottomSheet';\r\n import Tools from './react-sketch/src/tools';\r\n import Picker from './Colorpicker';\r\n//  import  from 'react-spring-bottom-sheet';\r\n import './App.css';\r\n import './Styles.css';\r\nimport picker from './Colorpicker';\r\n// import MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\r\nfunction App() {\r\n   const [open,setOpen]=useState(false);\r\n  const onDismiss=()=>{\r\n    setOpen(false);\r\n  }\r\n  const [state,setState]=useState( {\r\n    lineWidth: 10,\r\n    lineColor: 'black',\r\n    fillColor: '#ccffcc',\r\n    backgroundColor: '#ffcccc',\r\n    shadowWidth: 0,\r\n    shadowOffset: 0,\r\n    tool: Tools.Pencil,\r\n    enableRemoveSelected: false,\r\n    fillWithColor: false,\r\n    fillWithBackgroundColor: false,\r\n    drawings:[],\r\n    canUndo: true,\r\n    canRedo: false,\r\n    undoSteps:15,\r\n    controlledSize: false,\r\n    sketchWidth: 1500,\r\n    sketchHeight: 300,\r\n    stretched: true,\r\n    stretchedX: false,\r\n    stretchedY: false,\r\n    originX: 'left',\r\n    originY: 'top',\r\n    imageUrl: 'https://files.gamebanana.com/img/ico/sprays/4ea2f4dad8d6f.png',\r\n    expandTools: false,\r\n    expandControls: false,\r\n    expandColors: false,\r\n    expandBack: false,\r\n    expandImages: false,\r\n    expandControlled: false,\r\n    enableCopyPaste: false\r\n  }\r\n)\r\n  const handle=(col)=>\r\n  {\r\n    console.log(col,'color');\r\n   \r\n     setState({...state,\r\n       lineColor:col.hex,\r\n      //  fillColor:col.hex\r\n     }  \r\n     )\r\n    setOpen(false);\r\n  }\r\n \r\n  const handleClick=(val)=>{\r\n     setOpen(false);\r\n     setState({...state,\r\n      tool:Tools[val],\r\n      enableRemoveSelected: Tools[val] === Tools?.Select,\r\n      enableCopyPaste: Tools[val] === Tools?.Select\r\n    })\r\n   }\r\n  return(\r\n    <div className=\"parent\"  >\r\n      <ReactPlayer\r\n       width='100%'\r\n       height='100%'\r\n      controls \r\n      url='https://www.youtube.com/watch?v=7sDY4m8KNLc'/>\r\n    <div className=\"child\" >\r\n      <button className='Bottom' onClick={()=>setOpen(true)}>Open</button>\r\n      <Bs\r\n      open={open}\r\n      onDismiss={onDismiss}\r\n      handleClick={handleClick}\r\n      handle={handle}\r\n      state={state}\r\n      />\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n reportWebVitals();\r\n"],"sourceRoot":""}